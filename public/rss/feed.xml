<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>Humont.Dev</title>
        <link>https://humont.dev</link>
        <description>Humont's blog about tech and health</description>
        <lastBuildDate>Tue, 06 Sep 2022 15:05:37 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>Feed for Node.js</generator>
        <image>
            <title>Humont.Dev</title>
            <url>https://humont.dev/favicon.ico</url>
            <link>https://humont.dev</link>
        </image>
        <copyright>All rights reserved 2022, humont.dev</copyright>
        <item>
            <title><![CDATA[Plain Text Exercise Notation - a simple notation style for exercise recording]]></title>
            <link>https://humont.dev/posts/2022-09-5-pten</link>
            <guid>https://humont.dev/posts/2022-09-5-pten</guid>
            <pubDate>Mon, 05 Sep 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[Plain Text Exercise Notation - a simple notation style for exercise recording]]></description>
            <content:encoded><![CDATA[<h1>Plain Text Exercise Notation</h1>
<p>I've been recording my exercise/workout routines for 15 years now, and having a historical record of <em>what</em> I did and <em>when</em> has proven quite useful over the years for a few reasons:</p>
<ol>
<li>Knowing whether or not I'm progressing.</li>
<li>Getting program inspiration from what I've done in the past.</li>
<li>Seeing what's worked and in what context.</li>
</ol>
<p>On a few occasions, I've started using various apps to log my exercise. Without fail, I always stop using that app and revert back to just plain ol' text files, and I tend to forget to export my logs from the now abandoned app. This begs the question of why I ever use an app if I like text based logging so damned much? Well, an app provides me with a way of analysing my workouts over time, total sets per week, total sets per body part, average rest etc...</p>
<p>So, how do I get that functionality without leaving my beloved text files? Some sort of parse-able format! I already log in a relatively structured way, but if I take the time to formalise it, and then stick to it, then I can write scripts to parse over my files (or even files within a directory) and run analysis on them!</p>
<h2>Specification</h2>
<p>A formal specification for exercise logging notation <strong>MUST</strong> be able to do the following:</p>
<ol>
<li>Show the order in which exercises were performed.</li>
<li>Show the sets, reps, and weights/resistance/difficulty used.</li>
<li>Show the tempo (often abbreviated to <code>30X0</code> or something of that kind - meaning 3 seconds eccentric, 0 second pause at bottom, explosive concentric, 0 second pause at the top).</li>
<li>Show set style (rest-pause, extended sets, cluster sets etc...).</li>
<li>Group exercises into circuits.</li>
<li>Name sections of workouts.</li>
<li>Handle non rep/sets/weights based exercises (e.g duration, distance, speed as variables).</li>
<li>Show the duration of exercises or segments of exercises.</li>
<li>Be easy to read.</li>
<li>Be readable by a script.</li>
</ol>
<p>(10 requirements... that was lucky).</p>
<h2>Examples</h2>
<h3>Structure and Metadata</h3>
<p>With regards to structuring workouts in text, we need some of the following traits:</p>
<ol>
<li>Program name</li>
<li>Program metadata</li>
<li>Workout name</li>
<li>Workout metadata</li>
</ol>
<p>we can declare a program by using a markdown header symbol, and mark any metadata for the program directly below it by wrapping it in <code>---</code> three dashes:</p>
<pre><code># My great new program
---
date: 04/04/2024
notes: some notes about why I'm choosing to do this program
---
</code></pre>
<p>we can declare a workout by using the double hash symbol (level 2 header in markdown), and again, any metadata can be marked below it.</p>
<pre><code>## Workout 1
---
date: 13/04/2024
notes: some interesting notes about the workout...
---
</code></pre>
<h3>Exercise Declaration</h3>
<p>An exercise is declared by giving it an order in the workout, naming it, and then detailing it.</p>
<pre><code>A. Bench Press [20X0]: 3x10@100kg (60s)
B. Pull ups: 3x10@bw (45s)
C. Curls [Rest-pause]: 8+5+2@20kg
</code></pre>
<p>With regards to the syntax and meaning of the exercise declaration:</p>
<ol>
<li>the <code>A.</code> denotes the order in the workout the exercise is performed</li>
<li>The name of the exercise</li>
<li>the rep style declared in square brackets - this is a loose descriptor, so it can be a tempo (as in <code>[20X0]</code>) or a rep style (as in <code>[Rest-pause]</code> or <code>[extended-set]</code>)</li>
<li>the sets and reps and weights: <code>2x10@10kg</code> denoting: 2 sets of 10 reps at 10 kilograms. If only one set is being completed, then the set declaration can be omitted (e.g: <code>10@10kg</code> meaning 1 set of 10 reps at 10 kilograms)</li>
<li>the rest time between sets, declared in regular brackets.</li>
</ol>
<p>Here are some valid examples of how to declare exercises, reps, sets, effort etc..</p>
<pre><code>A. Bench Press: 3x10@100kg, 12@90kg, 15@80kg (60s)
</code></pre>
<p>or the same can be written as :</p>
<pre><code>A. Bench Press:
    3x10@100kg (60s)
    12@90kg (60s)
    15@80kg (60s)
</code></pre>
<p>notice that on the one line declaration, the rest time is only declared at the end - making implicit that the same rest is being used between all sets, whereas on the multI line declaration, the rest time is declared after each line. Both approaches work, and the single rest time declaration can be used on the multiline rep declaration as well.</p>
<p>A grouping of exercises (usually denoting a super-set, or a circuit) can be declared as:</p>
<pre><code>A. Bench Press: 3x10@100kg (60s)
-
B1. Curl: 10@20kg
B2. Extension: 20@20kg
B3. Sit-ups: 20
x2 (60s)
-
</code></pre>
<p>Here we use the letter B to denote that it comes after exercise A, and then enumerate 1 through 3 for the sub order of the exercises. The sets of the tri-set or circuit are presented at the bottom <code>x2</code> with the rest between circuits as <code>(60s)</code>. Note that it is also possible to declare rest time between elements within a circuits, eg: <code>B2. Extension: 20@20kg (30s)</code>.</p>
<p>It is sometimes useful to refer to a circuit by name (for example, certain 'Crossfit girls' workouts). The <code>-</code> at the start and end of the circuit segment allow us to encapsulate additional data.</p>
<pre><code>-
name: Mary
result: 15 + 7

C1. Handstand push-ups: 15x5, 1x7
C2. 1-legged squats, alternating legs: 15x10
C3. Pull ups: 15x15
20mins
-
</code></pre>
<p>This syntax highlights some interesting facts about the way groupings are interpreted. It is implicit in a grouping, that a set of an exercise is only repeated once all the other exercises in the grouping have been performed. For example, in the above grouping <code>15x5</code> does not imply that 15 sets of 5 reps of exercise <code>C1</code> were performed before moving on to <code>C2</code>, but rather that 15 sets were performed over all, in the prescribed order <code>C1 -> C2 -> C3</code>. The <code>1x7</code> on <code>C1</code> means that an additional set of 7 reps was performed for this one exercise. This further implies that it is not possible to log more sets for <code>C2</code> than for <code>C1</code>, nor is it possible to perform more than 1 extra set for <code>C1</code> than the other exercises in the grouping.</p>
<h3>Rest between sets versus rest after sets.</h3>
<p>The notation <code>A. Bench press: 3x10@100kg (60s)</code> states that 60s of rest was taken between each set of bench press. In the case that we wish to state that additional rest was taken between bench pressing and the subsequent exercise, especially where that rest is a feature of the workout, then ascribe it it's own letter, eg:</p>
<pre><code>A. Bench press: 3x10@100kg (60s)
B. (120s)
C. Pull ups: 3x10@bw (60s)
</code></pre>
<h3>Exercise duration</h3>
<p>The duration of an exercise, should we wish to track it, can be noted down inline and after the exercise, e.g:</p>
<pre><code>A. Bench press: 3x10@100kg (60s) 4mins 27s
</code></pre>
<p>We've already seen this form of notation in the exercise grouping section, where the grouping titled <code>mary</code> was set to <code>20mins</code></p>
]]></content:encoded>
            <author>hell@humont.dev (humont)</author>
        </item>
        <item>
            <title><![CDATA[Two Strength, Three hypertrophy]]></title>
            <link>https://humont.dev/posts/2022-05-10-2-strength-3-bb</link>
            <guid>https://humont.dev/posts/2022-05-10-2-strength-3-bb</guid>
            <pubDate>Tue, 10 May 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[Two Strength, Three hypertrophy]]></description>
            <content:encoded><![CDATA[<h1>Two Strength, Three hypertrophy</h1>
<p>A simple program based loosely on Layne Norton's PHAT program (loosely in that it's inspired by the split, not the progression scheme).</p>
<h2>Reasons</h2>
<p>I've looked back at my logs for the last few years, and a recurring theme is not being able to tolerate volume due to life stressors/conditioning. This is an attempt to address that.</p>
<h2>Framework</h2>
<ul>
<li>Progressions for days 1 &#x26; 2: ramp up the weight on each set. 120s rest between sets.</li>
<li>Progression for days 4-6: double progression method. 60s rest between sets.</li>
</ul>
<h3>Day 1</h3>
<ol>
<li>Single Arm Pull up: 5 sets of 3</li>
<li>Pendlay Row: 5 sets of 6</li>
<li>Overhead Press: 5 sets of 3</li>
<li>Dips: 5 sets of 6</li>
</ol>
<h3>Day 2</h3>
<ol>
<li>Deadlift: 5 sets of 6</li>
<li>Pistol Squats: 5 sets of 3</li>
<li>Ab Wheel roll out: 5 sets of 3-5</li>
</ol>
<h3>Day 3</h3>
<p>Rest</p>
<h3>Day 4</h3>
<ol>
<li>Pull ups: 5 sets 7-10</li>
<li>BB Row: 5 sets of 8-12</li>
<li>BB Upright Row: 5 sets of 8-12</li>
<li>Lateral raises: 5 sets of 8-12</li>
<li>Arnold Press: 5 sets of 6-8</li>
</ol>
<h3>Day 5</h3>
<ol>
<li>Sissy Squat: 5 sets of 8-12</li>
<li>Front Squats: 5 sets of 8-12</li>
<li>Nordic Curls: 5 sets of 5-8</li>
<li>Deficit RDL: 5 sets of 8-12</li>
<li>Hanging Leg raises: 5 sets of 8-12</li>
</ol>
<h3>Day 6</h3>
<ol>
<li>DB Fly: 5 sets of 7-10</li>
<li>Deficit Push ups: 5 sets of 8-12</li>
<li>BB Curl: 3 sets of 8-12</li>
<li>DB Skull crushers: 3 sets of 6-10</li>
<li>DB Hammer curl: 3 sets of 8-12</li>
<li>KB Overhead Extensions: 3 sets of 8-12</li>
</ol>
<h3>Day 7</h3>
<p>Rest</p>
]]></content:encoded>
            <author>hell@humont.dev (humont)</author>
        </item>
        <item>
            <title><![CDATA[Raspberry Pi - PoE+ Hat fans]]></title>
            <link>https://humont.dev/posts/2022-04-11-poe-hat</link>
            <guid>https://humont.dev/posts/2022-04-11-poe-hat</guid>
            <pubDate>Mon, 11 Apr 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[Raspberry Pi - PoE+ Hat fans]]></description>
            <content:encoded><![CDATA[<h1>Raspberry Pi - PoE+ Hat fans</h1>
<p>I've been tinkering around with my Raspberry Pi's recently, and since i've know got two, i thought it was time to get as lightly nicer set up! So, i bought a network switch, a multi-pi case, and a bunch of small (20cm) ethernet cables. In order to reduce cable clutter, I thought it could be neat to power the Pi's via Power over Ethernet, so I also bought a couple <a href="https://thepihut.com/products/raspberry-pi-poe-plus-hat">PoE+ Hats</a>.</p>
<p>They're pretty easy to set up, but the second i booted up the Pi, the fans started spinning, and wouldn't stop... Was it running too hot?</p>
<pre><code class="language-sh">$ vcgencmd measure_temp
temp=49.5'C
</code></pre>
<p>hm.... That really shouldn't be causing the fans to spin. After a little digging, i found the settings:</p>
<p>add these to your <code>/boot/config.txt</code>:</p>
<pre><code>dtparam=poe_fan_temp0=65000
dtparam=poe_fan_temp1=70000
dtparam=poe_fan_temp2=75000
dtparam=poe_fan_temp3=80000
dtparam=poe_fan_temp0_hyst=2000
dtparam=poe_fan_temp1_hyst=5000
</code></pre>
<p>Save, then reboot, and all should be well. Here's a little more detail on what those settings do (taken from <a href="https://github.com/raspberrypi/firmware/blob/master/boot/overlays/README#L1646">Pi firmeware README</a>)</p>
<pre><code>Params: poe_fan_temp0           Temperature (in millicelcius) at which the fan
                                turns on (default 40000)
        poe_fan_temp0_hyst      Temperature delta (in millicelcius) at which
                                the fan turns off (default 2000)
        poe_fan_temp1           Temperature (in millicelcius) at which the fan
                                speeds up (default 45000)
        poe_fan_temp1_hyst      Temperature delta (in millicelcius) at which
                                the fan slows down (default 2000)
        poe_fan_temp2           Temperature (in millicelcius) at which the fan
                                speeds up (default 50000)
        poe_fan_temp2_hyst      Temperature delta (in millicelcius) at which
                                the fan slows down (default 2000)
        poe_fan_temp3           Temperature (in millicelcius) at which the fan
                                speeds up (default 55000)
        poe_fan_temp3_hyst      Temperature delta (in millicelcius) at which
                                the fan slows down (default 5000)
        i2c                     Control the fan via Linux I2C drivers instead of
                                the firmware.
</code></pre>
]]></content:encoded>
            <author>hell@humont.dev (humont)</author>
        </item>
        <item>
            <title><![CDATA[A List of Strength Training Methods]]></title>
            <link>https://humont.dev/posts/2022-01-27-exercise-methods</link>
            <guid>https://humont.dev/posts/2022-01-27-exercise-methods</guid>
            <pubDate>Thu, 27 Jan 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[A List of Strength Training Methods]]></description>
            <content:encoded><![CDATA[<pre><code>
Updates:
2022-01-27: first published
2022-02-25: added Fatigue Percentage Drops
</code></pre>
<h1>A List of Strength Training Methods</h1>
<p>This is a living document cataloguing a variety of different training rep, set, and programming schemes I've liked and used over the years. The only requirements for inclusion are any combination of: i) it works; ii) I liked it.</p>
<p>Some of these are progression schemes, others are just structures that i can use as a framework when i'm looking to "exercise" versus training for some specific goal.</p>
<p>Because my bias leans towards strength training, most of the methods have a focus on increasing weight lifted.</p>
<hr>
<h2>Strength Methods</h2>
<h3>HML - Heavy-Medium-Light</h3>
<p>Heavy: 1-3 (or 3-5 if legs) reps.
Medium: 5-7 (or 8-10 if legs) reps.
Light: 12-15 (or 15+ if legs) reps.</p>
<p>Pick a weight that allows you to hit the bottom end of the heavy range for an exercise. For the other sets, the weight depends on that first one:</p>
<p>less than 100kg = -10kg/set
less than 200kg = -20kg/set
more than 200kg = -40kg/set</p>
<p>When you reach the top rep range on the light set, increase the weight by 5-10kg</p>
<h3>Strength Skill</h3>
<p>I've ran this framework at least 6 times over the years, and found that it's especially good to rebuild a base strength after having been away from strength focused work for a long time. <a href="https://www.t-nation.com/workouts/russian-strength-skill-the-workouts/">Here's the link to the original article</a>.</p>
<p>The Basic premise:</p>
<ol>
<li>Pick a weight that represents a solid "training max" (not a true 1RM, but about 90-95% of it).</li>
<li>Start by doing 5 sets of 1 with that weight.</li>
<li>Every session, add one set, until you reach 10 sets of 1.</li>
<li>Repeat the cycle with a slightly heavier weight.</li>
</ol>
<p>I like to pick a weight i can solidly accelerate for at least the first 5 reps.</p>
<h3>Reactive Training System's RPE - Fatigue Percentage Drops</h3>
<p>Used this method by Mike Tuchscherer a lot back in my earlier strength training days - and it was an awesome way to auto-regulate volume for performance. Use this primarily on primary strength lifts (bench press, squat, deadlift, etc... the big compound lifts). Here's an <a href="https://articles.reactivetrainingsystems.com/2015/11/29/beginning-rts/">article outlining the basic gist</a>.</p>
<p>How to use:</p>
<ol>
<li>Pick an RPE (Rate of perceived exertion), and a rep range to use (usually 1-4 reps)</li>
<li>Work up to a weight that matches the target RPE</li>
<li>Select a percentage drop (the bigger this number, the higher the volume) - e.g: 5%</li>
<li>Take that percentage off of the weight worked up to on step 2. (this drops both the weight, and, because you are not very fatigued yet, the RPE)</li>
<li>Keep doing sets at that weight until the RPE reaches the target RPE again - that's you done.</li>
</ol>
<p>Practical example</p>
<ol>
<li>Target RPE 9 (1 more rep in reserve), with 2 reps, 5% fatigue drop</li>
<li>Ramp up the weight in sets of 2 on the squat -> reach 2@160kg with RPE 9</li>
<li>Drop 5% off of weight : 152kg</li>
<li>Do sets of 2 reps. The first set might be an RPE of 7.</li>
<li>Keep doing sets of 2 until the RPE reaches 9 again.</li>
<li>This auto regulates the volume</li>
</ol>
<hr>
<h2>Bodybuilding Methods</h2>
<h3>Rest Pause / DC Training</h3>
<p>This is one I keep going back to, and the <a href="https://www.intensemuscle.com/forum/main-forums/the-dogg-pound/20286-updated-dc-training-newbies-read-this-first-and-then-ask-questions-later">post detailing the method</a> covers most of the questions around it and it's origins.</p>
<p><strong>The basic gist:</strong></p>
<ul>
<li>3 mini sets, each separated by 10 deep breaths.</li>
<li>Each mini set is to be taken to failure</li>
<li>Each rep is performed with a 4 second eccentric (lowering) portion of the lift</li>
<li>On the final failed rep, continue to attempt to move the weight for 5-10 seconds</li>
<li>after the 3rd and final mini set, perform a loaded stretch for the targetted muscle group.</li>
</ul>
<p><strong>Concrete example:</strong>
<em>Using the DB Bench Press</em></p>
<ol>
<li>1 set to failure with 4s eccentrics - 6 reps</li>
<li>Attempt the 7th rep, but fail to complete it, but keep trying for 5-10s</li>
<li>rest for 10 deep breaths.</li>
<li>Repeat 2 more times (managing 4 and 2 reps on each set respectively)</li>
<li>After, do a loaded chest stretch for 30-60s</li>
<li>Count the total amount of succesful reps</li>
</ol>
<p><strong>Progression:</strong>
Pick a rep target (e.g 16 cumulative reps over 3 sets), and keep repeating the exercise each session with teh same weight until you have reached it. Then increase the weight and start again.</p>
]]></content:encoded>
            <author>hell@humont.dev (humont)</author>
        </item>
        <item>
            <title><![CDATA[Loot NFT Project]]></title>
            <link>https://humont.dev/posts/2022-01-01-loot-project</link>
            <guid>https://humont.dev/posts/2022-01-01-loot-project</guid>
            <pubDate>Sat, 01 Jan 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[Loot NFT Project]]></description>
            <content:encoded><![CDATA[<h1>Loot Project</h1>
<p><a href="https://www.lootproject.com/">loot Project</a> is an NFT project which randomly generates a list (bag) of gear (loot) and stores it on chain. There are a limited (2,540) amount of bags.</p>
<p>The project launched with absolutely no details as to what people could do with their bags of loot, but quickly, owners started generating <a href="https://www.lootwatcher.com/">projects</a> around the loot NFTs, which any loot holder could participate in.</p>
<h2>Ideas</h2>
<p>There’s an interesting idea in here: a simple token with some metadata, which games can be created on top of. As it stands, the Loot Project has been adding it’s own little games on top of the first drop, but as the user generated projects show - <em>anyone</em> can create one! Imagine a card game where users buy (mint) a back of cards (NFTs) which can then be used to play any type of game built on top of it.</p>
<p>An interesting spin, and one which doesn’t fall prey to the current cash-grab driven NFT world, is where the mint stays open, and anyone can generate a pack of cards for the same price for as long as the contract exists - people could generate art on top of those cards (and this art could be limited edition, fulfilling the current cultural desire for rewarding early adopters), as well as games.</p>
<p>Loot meets Pokémon trading card game.</p>
]]></content:encoded>
            <author>hell@humont.dev (humont)</author>
        </item>
        <item>
            <title><![CDATA[Push/Pull/Legs - Strength and Circuits]]></title>
            <link>https://humont.dev/posts/2021-12-29-strenght-and-circuits</link>
            <guid>https://humont.dev/posts/2021-12-29-strenght-and-circuits</guid>
            <pubDate>Wed, 29 Dec 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[Push/Pull/Legs - Strength and Circuits]]></description>
            <content:encoded><![CDATA[<h1>Push / Pull / Legs - Strength and Circuits</h1>
<p>The last framework didn't last too long. Travel and Christmas and wanting a change of pace have all kicked in!</p>
<p>However, I'd still like to progress on strength - but i also have some pains and niggles i need to address, as well as chucking in some more mobility work!</p>
<p>The general idea is:</p>
<ul>
<li>Split the body into three sections: Upper body push; upper body pull; lower body.</li>
<li>One strength piece using the approach from <a href="https://thibarmy.com/russian-strength-skill-the-workouts/">this article</a>, specifically: 5-10 sets of 1 rep, with a back off set of 3 reps. The progression is adding an extra single every workout until 10 singles are done. Then increasing the weight.
<ul>
<li>This is an approach i've used a lot in the past, with a lot of success!</li>
</ul>
</li>
<li>One accessory movement for a second section
<ul>
<li>why do accessory work for a different section: because i want a full body approach (i'm only doing 3 stimulating workouts a week), So, for example, i'll do my leg accessory work on an upper body strength day.</li>
</ul>
</li>
<li>A Circuit for the third section.
<ul>
<li>This is performed with 1 min rest between circuits, but no rest between exercises.</li>
<li>I'm also using a pre-fatigue set up for upper body work (this is a strength of mine at the moment, so pre-fatigue tempers the weights used),</li>
<li>and a post fatigue for lower body (Glutes in particular are a weakness at the moment) for added stimulus whilst still being able to use heavier loads.</li>
</ul>
</li>
<li><a href="https://www.coastalfitnesshk.com/coastal-fitness/meet-the-team/ed-haynes/">Ed Haynes</a> mentioned that i may be lacking dedicated work on my lats - so I'm sticking in Kayak Rows</li>
</ul>
<p>So, here's what it looks like:</p>
<h2>Day 1</h2>
<ol>
<li>Overhead Press: 5-10x1, 1x3</li>
<li>Stiff Leg Deadlift: 3x10-12</li>
</ol>
<p>Circuit 2-3 rounds:</p>
<ol start="3">
<li>Kayak Rows: 10-15</li>
<li>BB Row: 10-15</li>
<li>Ab wheel roll outs: 3-5</li>
</ol>
<h2>Day 2</h2>
<ol>
<li>Front Squat: 5-10x1, 1x3</li>
<li>Pull Up: 3x10-12</li>
</ol>
<p>Circuit 2-3 rounds:</p>
<ol start="3">
<li>DB Fly: 10-15</li>
<li>Deficit Push up: 10-15</li>
<li>DB Curl: 10-15</li>
</ol>
<h2>Day 3</h2>
<ol>
<li>Snatch Grip Power High Pull: 5-10x1, 1x3</li>
<li>Glute Ham Raise: 3x10-12</li>
</ol>
<p>Circuit 2-3 rounds:</p>
<ol start="3">
<li>Rear Foot Elevated Split Squat: 10-15</li>
<li>Single Leg Hip Thrust: 10-15</li>
<li>DB Skull Crusher: 10-15</li>
</ol>
]]></content:encoded>
            <author>hell@humont.dev (humont)</author>
        </item>
        <item>
            <title><![CDATA[NFT Game asset ownership]]></title>
            <link>https://humont.dev/posts/2021-12-14-NFT-game-asset-ownership</link>
            <guid>https://humont.dev/posts/2021-12-14-NFT-game-asset-ownership</guid>
            <pubDate>Tue, 14 Dec 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[NFT Game asset ownership]]></description>
            <content:encoded><![CDATA[<h1>NFT Game Asset Ownership</h1>
<p>One of the promises that NFT's seek to fulfils in the context of gaming - is ownership over in game content. I was thinking about this today as League Of Legends released some new skins, and I can't help but wonder what the implications of that are.</p>
<p>Say i purchase a LoL in game skin as an NFT, and Riot bans me from playing LoL: i can do.... what? Are there other games that promise interoperability for that skin? Unlikely. Can i sell that skin on a secondary market and at least make some value back? Probably.</p>
<p>These thoughts are still not fully formed, but here they are anyway:</p>
<p><strong>What NFT's are UNLIKELY to unlock</strong></p>
<ol>
<li>
<p>Game interoperability.</p>
<ul>
<li>The incentive for developers to actually implement interoperability seems low, at least at the start. There's a potential future where some developers hack user adoption by making their game compatible with existing game's NFTs, but i imagine that this would seriously limit the creativity that developers could express in their games.</li>
</ul>
</li>
<li>
<p>Being able to play a game if a developer decides to boot you from the platform.</p>
</li>
</ol>
<p><strong>What NFT's are LIKELY to unlock</strong></p>
<ol>
<li>A new genre of games (e.g Axie Infinity and other NFT based games with their own tokenomics), with different funding models for the developers.</li>
<li>Secondary markets for traditional game content (e.g sell your skin from LoL).</li>
<li>Meta-communities around games
<ul>
<li>e.g: gamers with NFTs chatting on their communication medium of choice, or coming together and creating derivative content/games based on their in-game assets</li>
<li>This might even negate the first bullet point in the <strong>UNLIKELY</strong> section - as this creates de facto interoperability through composability.</li>
</ul>
</li>
</ol>
]]></content:encoded>
            <author>hell@humont.dev (humont)</author>
        </item>
        <item>
            <title><![CDATA[Three Circuits 2]]></title>
            <link>https://humont.dev/posts/2021-12-13-three-circuits-2</link>
            <guid>https://humont.dev/posts/2021-12-13-three-circuits-2</guid>
            <pubDate>Mon, 13 Dec 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[Three Circuits 2]]></description>
            <content:encoded><![CDATA[<h1>Three Circuits 2</h1>
<p>So this is a slight evolution of the <a href="/posts/2021-11-08-three-circuits">last set up</a> - with a little more volume checked in, and a clearly separation of focus on each session.</p>
<p>The basic set up is:</p>
<ol>
<li>Strength day: Double progression method</li>
<li>Bodybuilding Day: Tripple rest pause method (DC Style)</li>
<li>Uni-lateral (balance) Day: Quality work</li>
</ol>
<h2>Day 1</h2>
<ol>
<li>Overhead Press: 3-5@80kg</li>
<li>Pendlay Row: 3-5@100kg</li>
<li>Front Squat: 3-5@110kg</li>
<li>Standing Ab wheel roll out: 3-5 @medium band
x3 rounds (45s between each exercise)</li>
</ol>
<h2>Day 2</h2>
<ol>
<li>Lateral raises</li>
<li>DB Fly</li>
<li>Parallette push up</li>
<li>Neutral grip pull up</li>
<li>Band Pull apart</li>
<li>DB Curl</li>
<li>Sissy Squat
x1 rounds - continuous circuit</li>
</ol>
<h2>Day 3</h2>
<ol>
<li>Single arm KB Swing</li>
<li>Rear foot elevated split squat</li>
<li>Turkish Getup</li>
</ol>
]]></content:encoded>
            <author>hell@humont.dev (humont)</author>
        </item>
        <item>
            <title><![CDATA[Three Circuits]]></title>
            <link>https://humont.dev/posts/2021-11-08-three-circuits</link>
            <guid>https://humont.dev/posts/2021-11-08-three-circuits</guid>
            <pubDate>Mon, 08 Nov 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[Three Circuits]]></description>
            <content:encoded><![CDATA[<h1>Three Circuits</h1>
<p>I've actually been doing this routine for a few weeks now, but I forgot to write about it (something about blogging not being second nature... yet!).</p>
<p>It's a simple structure: 1 day on, 1 day off, ad nauseam. I'm also chucking in some long and slow cardio on off days - a 5km run with a friend. Each circuit is ran through three times, and the goal is to incrementally increase the reps across all three, until I hit my self prescribed rep ceiling, at which point I increase the weight.</p>
<p>These seem to be taking between 25-35 minutes depending on how energetic i'm feeling.</p>
<p>Quite simple. Quite straight forwards.</p>
<h2>Day 1</h2>
<ol>
<li>Overhead Press: 3-5@80kg</li>
<li>Pendlay Row: 3-5@100kg</li>
<li>Front Squat: 3-5@110kg</li>
<li>V-Ups: 15+ @bw</li>
</ol>
<h2>Day 2</h2>
<ol>
<li>Weighted Parrallet push up: 8-10@+25kg</li>
<li>Pull up: 10-12 @bw</li>
<li>Stiff leg deadlift: 12-14@100kg</li>
<li>Standing Ab Wheel roll out: 3-5@purple band</li>
</ol>
<h2>Day 3</h2>
<ol>
<li>DB Curls: 6-8@15kg</li>
<li>DB Skull crushers: 6-8@15kg</li>
<li>Glute bridge/clam shell duo: 15,14,13,12....3,2,1</li>
<li>Hardstyle Plank: 10 breaths</li>
</ol>
]]></content:encoded>
            <author>hell@humont.dev (humont)</author>
        </item>
        <item>
            <title><![CDATA[A Useable API for Government]]></title>
            <link>https://humont.dev/posts/2021-10-28-gov-api</link>
            <guid>https://humont.dev/posts/2021-10-28-gov-api</guid>
            <pubDate>Thu, 28 Oct 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[A Useable API for Government]]></description>
            <content:encoded><![CDATA[<h1>A useable API for Government</h1>
<blockquote>
<p>Currently accessible @ <a href="https://gov-api.humont.dev/api/graphql">gov-api.humont.dev</a></p>
</blockquote>
<h2>Background</h2>
<p>For years now I've come back again and again to the problem of an informed citizenry. The internet seems to have largely demolished the fourth estates role in keeping citizens informed as to what is <em>actually</em> happening, whilst also creating new avenues for <em>misinformation</em> to spread. Yet we were promised the opposite: that the internet, the "information superhighway" as it was once called, would make it <em>easier</em> for people to remain informed, and <em>harder</em> for those wishing to mislead to actually do so.</p>
<p>Whilst there are probably a whole host of reasons as to why we have ended up where we are, and I'm sure there are some very intelligent people who have come up with frameworks to analyse and explain it, to me it would appear that one important factor is this:</p>
<p><em>Despite having the means of instantaneous and comprehensive access to information, many institutions have yet to actually make that data accessible</em>.</p>
<p>By accessible, I don't just mean available: I mean that the information can be discovered, and digested in a meaningful way by most citizens. Which brings me to the current idea - an accessible API (application programming interface) for government institutions and services, where developers or citizens with the technical know-how traverse the reams of data. It will make available data accessible. It will make it easy to build dashboards that presents this data. It will, hopefully, allow for at least a <em>small</em> portion of the citizenry to become better informed.</p>
<h2>The Project</h2>
<p>I am deploying a GraphQL endpoint over the existing U.K. parliament RESTful API. Right now, the endpoint covers only a portion of the <a href="https://members-api.parliament.uk/index.html">Members API</a> found on the UK Parliament's <a href="https://members-api.parliament.uk/index.html">developer hub</a>. Now that the basic architecture is in place, and that I've made some initial decisions as to the shape of the data, I'll use the next few weeks to finish coverage of the entire developer API for parliament.</p>
<p>The hope is that over time, this endpoint will cover more and more government services, creating a single point of access for other developers (and myself) to play around with creating dashboards, tables, and any other imaginable view on top of this data.</p>
<h2>Monetisation</h2>
<p>This is trickier. Access <em>should</em> be free (this is, after all, publicly available data). However, time and effort are being spent to create this project, so remuneration is somewhat desirable. I think I'll rate limit access, and create a tier with no limits at a fixed price. This is obviously subject to change.</p>
]]></content:encoded>
            <author>hell@humont.dev (humont)</author>
        </item>
        <item>
            <title><![CDATA[Why do I find blockchain so appealing: Measuring Value]]></title>
            <link>https://humont.dev/posts/2021-10-15-crytpo-weighing-and-measuring</link>
            <guid>https://humont.dev/posts/2021-10-15-crytpo-weighing-and-measuring</guid>
            <pubDate>Fri, 15 Oct 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[Why do I find blockchain so appealing: Measuring Value]]></description>
            <content:encoded><![CDATA[<h1>Why do I find blockchain so appealing: Measuring and Rewarding Value</h1>
<h2>Preamble</h2>
<p>I've been fascinated by the blockchain world since just before the 2017 bull run - and have been reading keenly about new projects, and existing project developments ever since.</p>
<p>Now that I'm starting to actually develop on the blockchain, I think it's time I develop my thoughts a little as to why I find the space exciting. This will probably evolve into a series of posts, loosely tied together by conceit of asking myself a question coming to a thoughtful answer. I'll try and do away with my emotional bias of wanting to like the general idea of blockchains, and develop my ideas from there.</p>
<h2>Measuring Value</h2>
<blockquote>
<p>Rather than seeing himself as human because he could make economic calculations, the hunter insisted that being truly human meant <em>refusing</em> to make such calculations, refusing to measure or remember who had given what to whom, for the precise reason that doing so would inevitably create a world where we began "comparing power with power, measuring, calculating" and reducing each other to slaves or dogs through debt.</p>
<p><em>History of Debt, 10th anniversary edition, David Graeber, p.79</em></p>
</blockquote>
<p>Every time we assign a measurable value to something, we effectively degrade it - that's the crux of the quote above from Graeber's insightful work on debt. Services, objects, and <em>people</em> lose something when we decide "this is how much it, or you, is worth". There is something intuitively truthy about this - think of climate change: the second we assign a value to emissions, effectively telling companies/people pay for the damage you are causing, we also make a claim as to the worth of our planet and climate. Yet ask any person today, "what is the future of this planet, it's ecosystem, worth?" and the answer <em>should</em> be that it's invaluable.</p>
<p>I find this appealing.</p>
<p>Yet I also find blockchains and their capacity to algorithmically and democratically assign and distribute value appealing. Which poses a slight conundrum - part of the goal of blockchain is to capture as much behaviour as possible <em>on chain</em> in order for that behaviour to be valued, and that value distributed. So how do we reconcile this tension?</p>
<p>One answer is that we live in a world where we do weigh and measure <em>some</em> things, and that we create harm by neglecting to weight and measure <em>other</em> things - a classic example being care work (a role traditionally fulfilled by women, a commonality to a lot of things we don't measure). In the world of development, open source contributions are one such example. Accordingly, a system that could facilitate the rewarding of such work can only serve to bring about a little more balance and fairness.</p>
<p>This leads to my current point in the development of this trail of thought: Blockchains might represent a path towards no longer having to think about valuations and rewards. In a world where rewards are algorithmically distributed, automatically, without the onus being on the claimant, we may finally stop continuously measuring and weighing. Indeed, perhaps our propensity to do so lies in the fact that such matters are up for debate, and that no two people can quite agree on a single source of truth.</p>
<p>Then again, this does start to sound like quite a utopian, extremist view point.</p>
]]></content:encoded>
            <author>hell@humont.dev (humont)</author>
        </item>
        <item>
            <title><![CDATA[4 Day Full Body]]></title>
            <link>https://humont.dev/posts/2021-09-15-4-day-full-body</link>
            <guid>https://humont.dev/posts/2021-09-15-4-day-full-body</guid>
            <pubDate>Wed, 15 Sep 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[4 Day Full Body]]></description>
            <content:encoded><![CDATA[<h1>4 Day Full Body</h1>
<blockquote>
<p>Review:
Ended up running this for 3 cycles instead of more - tweaked something in my shoulder, which made all the overhead work near impossible for a while.</p>
</blockquote>
<blockquote>
<p>Overall, it was a nice cycle and a nice change of pace - good to do some more volume in there for a bit, and I may bump it up again in november when i know i'll be in one place for a while!</p>
</blockquote>
<h2>Reasons</h2>
<p>Over the last couple years, my focus has moved away from exercising quite a bit, and been spending most of my daily energy on programming and <em>other life stuff</em>. As a result of this, my programs have become quite low volume and low intensity - which I've compensated for by increasing the frequency. But every now and again, I want a <em>little</em> more <em>oomph</em>!</p>
<p>This program should serve that purpose!</p>
<h2>Design</h2>
<p>Each day is fullbody-ish... pairing upper body push with lowerbody pull, and upper body pull with lower body push.</p>
<p>Each workout has three sections:</p>
<ol>
<li>Strength piece / Primary exercise</li>
<li>Accessory Exercise</li>
<li>Volume work</li>
</ol>
<blockquote>
<p>The strength piece uses a structure I've had in my repertoire for close to a decade now - 3 sets: one heavy; one medium; one light.
Heavy: 3-5 (or 5-7 if legs) reps.
Medium: 7-10 (or 9-12 if legs) reps.
Light: 12-15 (or 15+ if legs) reps.</p>
<p>Pick a weight that allows you to hit the bottom end of the heavy range for an exercise. For the other sets, the weight depends on that first one:</p>
<p>less than 100kg = -10kg/set</p>
<p>less than 200kg = -20kg/set</p>
<p>more than 200kg = -40kg/set</p>
<p>When you reach the top rep range on the light set, increase the weight by 5-10kg</p>
</blockquote>
<p>Progression for the accessory and volume work is pretty straight forward, add reps each workout if possible, add weight when I hit the top rep range (or when I feel it's appropriate).</p>
<p>These should take about 25-35 mins to finish, including the warm up.</p>
<p>I'll probably run this for 5 or so cycles.</p>
<h2>Program:</h2>
<p><strong>Day 1</strong></p>
<ol>
<li>Over head press: @80kg, @70kg, @60kg (180s)</li>
<li>Wide grip behind the neck press: 3x10-12 (60s)</li>
</ol>
<p>superset (x2)(0s):</p>
<ol start="3">
<li>Chest Fly: triple rest pause @15kg</li>
<li>Nordic Back extensions: triple rest pause</li>
</ol>
<p><strong>Day 2</strong></p>
<ol>
<li>Front Squat: @110kg, @90kg, @70kg (180s)</li>
<li>Rear foot elevated split squats: 3x10-12 (90s)</li>
</ol>
<p>superset (x2)(0s):</p>
<ol start="3">
<li>Ring Row: Max reps</li>
<li>Hammer curl: Max reps</li>
<li>V-Ups</li>
</ol>
<p><strong>Day 3</strong></p>
<ol>
<li>Dips: @+40kg, @+20kg, @bw (180s)</li>
<li>Weighted ring push ups: 3x10-12 (60s)</li>
</ol>
<p>superset (x2)(0s):</p>
<ol start="3">
<li>Nordic Hamstring Curls: triple rest pause</li>
<li>Lateral raises: triple rest pause</li>
</ol>
<p><strong>Day 4</strong></p>
<ol>
<li>Single Arm pull up: @-7.5kg, @-17.5kg, regular pullup @bw (180s)</li>
<li>Barbbell Row: 3x10-12 (60s)</li>
</ol>
<p>superset (x2)(0s):</p>
<ol start="3">
<li>Sissy Squat: xMax</li>
<li>Hanging Leg Raise: xMax</li>
<li>DB Curl: xMax</li>
</ol>
]]></content:encoded>
            <author>hell@humont.dev (humont)</author>
        </item>
        <item>
            <title><![CDATA[Solana Programming Model Overview]]></title>
            <link>https://humont.dev/posts/2021-09-01-solana-programming-overview</link>
            <guid>https://humont.dev/posts/2021-09-01-solana-programming-overview</guid>
            <pubDate>Wed, 01 Sep 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[Solana Programming Model Overview]]></description>
            <content:encoded><![CDATA[<h1>Solana's Programming Model</h1>
<p>Here's my sumarising of how the Solana blockchain works. Mainly so I can refer back to it and understand it in my own words! It mostly follows the breakdown provided in their own <a href="https://docs.solana.com/developing/programming-model/overview">documentation</a>, but with more pretty drawings, and a little additional context drawn in from other readings.</p>
<h2>Overview</h2>
<p>Solana's system architecture (or at least, the part of it that is of interest in understanding how to develop for it) can be broken down into validators and clusters (these function as a sort of "server"). A cluster is simply a set of validators. There can be many clusters each using the Solana program, but unless they share a genesis block (the first block in the chain), they are considered different chains and do not interact. A transaction (more on this later) sent to the wrong cluster will be ignored.</p>
<p><img src="/images/2021-09/cluster-validator.png" alt="Solana Cluster Validator Diagram"></p>
<p>Clients send transactions to a validator, and those transactions end up in the cluster's <em>data plane</em> (created by the validator that is currently acting as leader) where they are batched and sent to validator nodes to validate into a block.</p>
<h2>The Transaction</h2>
<p>The transaction sent by the client can contain <em>instructions</em>. The Solana run time (itself a program), processes the instructions in the given order and atomically. An instruction contains three key parts: 1) the program id that should be executed; 2) the accounts that are affected by this program; 3) a data byte array - used to tell the program what functions to call and with what arguments - kind of like an RPC.</p>
<p><img src="/images/2021-09/transaction-instructions.png" alt="Solana Cluster Validator Diagram"></p>
<h2>The Account</h2>
<p>Accounts store state. The Solana documentation compares accounts to files in an operating system - they can hold arbitrary data and maintain the state of it after a program has finished executing. Accounts also have metadata that indicates the access control for the account.</p>
<p><strong>It's important to note that accounts pay rent in order to remain alive in a cluster</strong>. When validators scan an account, they collect rent, but if the accounts balance is 0 lamports, then the account is purged. The way around this is to deposit a sufficient amount of Lamports into the account to mark it <a href="https://docs.solana.com/developing/programming-model/accounts#rent-exemption">rent-exempt</a></p>
<p>Each account has an address that can be used to look it up.</p>
<p>Of particular interest, is that an account can be marked as "executable" - making it a program (ooooh things are starting to make sense now). An interesting property of executable accounts is that their data is immutable - so they <em>cannot</em> store state!</p>
<h3>Account ownership</h3>
<p>This bit is important a "regular" account (one that can be accessed by a wallet) is created and owned by the built-in <code>System</code> program. These are refered to as a <code>system account</code>. The metadata of this account is used to denote the "owner" in the traditional sense of the word, but technically, the programmatic owner is the <code>System</code> program.</p>
<blockquote>
<p>this is a bit of a mind bender... so accounts don't <em>actually</em> belong to you, but to the blockchain? Can the <code>System</code> program do things to these accounts - clearly, yes - as it can <em>take</em> rent, without requiring a signature... better hope that code is written well!</p>
</blockquote>
<p>An executable account (a program) can also create accounts and own them (ok, so accounts are always owned by programs, i.e. executable accounts). A program might create an account during it's execution, which leads to an interesting possibility where (<a href="https://docs.solana.com/developing/programming-model/runtime#capability-of-programs">quoting from documentation</a>) : <em>"the entire set of accounts owned by a given program can be regarded as a key-value store where a key is the account address and value is program-specific arbitrary binary data. A program author can decide how to manage the program's whole state as possibly many accounts."</em></p>
<h3>Program Capabilities</h3>
<p>This section is best just copied and pasted <a href="https://docs.solana.com/developing/programming-model/runtime#policy">from their docs</a> again - here are things that accounts can do:</p>
<blockquote>
<ul>
<li>Only the owner of the account may change owner.
<ul>
<li>And only if the account is writable.</li>
<li>And only if the account is not executable</li>
<li>And only if the data is zero-initialized or empty.</li>
</ul>
</li>
<li>An account not assigned to the program cannot have its balance decrease.</li>
<li>The balance of read-only and executable accounts may not change.</li>
<li>Only the system program can change the size of the data and only if the system program owns the account.</li>
<li>Only the owner may change account data.
<ul>
<li>And if the account is writable.</li>
<li>And if the account is not executable.</li>
</ul>
</li>
<li>Executable is one-way (false->true) and only the account owner may set it.</li>
<li>No one modification to the rent_epoch associated with this account.</li>
</ul>
</blockquote>
<p>Additionaly, a program has a budget - to prevent it from abusing the blockchain's resources.</p>
<h3>Cross Program Invocations</h3>
<p>Intuitively, programs can call other programs (but watch your budget). Note that there is no concurrency in this model - if a program calls another, it pauses until the latter has finished running. The call depth for cross program invocations is 64.</p>
<p>There are some fancy things that can be done here - specifcally, with the concept of <a href="https://docs.solana.com/developing/programming-model/calling-between-programs#program-derived-addresses">Program Derived Addresses (PDA)</a>. A program may programmatically generate a signature for an as of yet non-existant account (remember - programs can own accounts), it can also transfer ownership of this account to another program (by modifying the ownership metadata of the account). Since programs cannot keep state, they cannot handle escrow functionality on their own - but by creating and transfering account ownerships, they can.</p>
<p>A PDA can only be controlled by programs, not by modifiable addresses (or external users) - this makes escrow safe as an escrow account can only be controlled by the creator (or later transferred to) program.</p>
]]></content:encoded>
            <author>hell@humont.dev (humont)</author>
        </item>
        <item>
            <title><![CDATA[Local development for solana]]></title>
            <link>https://humont.dev/posts/2021-08-31-solana-local-dev</link>
            <guid>https://humont.dev/posts/2021-08-31-solana-local-dev</guid>
            <pubDate>Tue, 31 Aug 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[Local development for solana]]></description>
            <content:encoded><![CDATA[<h1>Local development for solana</h1>
<p>Time to jump into some blockchain development, but my god... the fees. Good thing there are alternatives to deploying programmes and smart contracts straight to the main networks!</p>
<p>What follows is my path to understanding how to develop and test solana programmes locally.</p>
<h2>Dependencies</h2>
<p>We'll need:</p>
<ol>
<li><a href="https://doc.rust-lang.org/stable/book/ch01-01-installation.html">Rust</a></li>
<li><a href="https://docs.solana.com/cli/install-solana-cli-tools">Solana Tool Suite</a></li>
</ol>
<h2>Localnet</h2>
<p>Create a local solana keypair (the basis for a wallet):</p>
<pre><code class="language-shell">solana-keygen new
</code></pre>
<p>Then un the following command to launch network:</p>
<pre><code class="language-shell">solana-test-validator
</code></pre>
<p>Double check that your local solana configuration is set to using this test net as the RPC endpoint, <code>solana config get</code> should show <code>http://localhost:8899</code> as the <code>RPC URL</code>. If it doesn't, run <code>solana config set --url http://locahost:8899</code>. Then check that all is working by calling the chain and checking your balance: <code>solana balance</code> which should output a number greater than zero.</p>
<p>I happen to have some funky stuff happening on my computer meaning that <code>localhost</code> doesn't resolve to <code>127.0.0.1:8900</code>. So if you get an error messag</p>
<p>If you happen to have been running the test-validator prevoiusly on a different network, then it may not have registered your keypair, in which case you need to re-initialise the network with <code>solana-test-validator -r</code></p>
<h2>Deploying to local net with the command line</h2>
<p>This part is easy:</p>
<pre><code class="language-shell">solana deploy {{PROGRAM_PATH}}
</code></pre>
<p>which should output a <code>programId</code> which you can now use in your own clients!</p>
]]></content:encoded>
            <author>hell@humont.dev (humont)</author>
        </item>
        <item>
            <title><![CDATA[Full text search with Hasura]]></title>
            <link>https://humont.dev/posts/2021-08-16-full-text-search</link>
            <guid>https://humont.dev/posts/2021-08-16-full-text-search</guid>
            <pubDate>Mon, 16 Aug 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[Full text search with Hasura]]></description>
            <content:encoded><![CDATA[<h1>Full text search with Hasura</h1>
<p><a href="https://hasura.io">Hasura</a> is an open source GraphQL layer on top of PostgreSQL that makes it easy to manage your data, and automatically exposes it through a GraphQL endpoint.</p>
<p>Having now tinkered with it on a few smaller personal projects, and two professional projects, I've started wanting to do things that don't neceessarily come naturally on Hasura. <em>Full text search</em> is one of those.</p>
<hr>
<h2>Scenario</h2>
<p>Let's use a simple table as an example:</p>
<pre><code class="language-sql">CREATE TABLE "articles" (
    "id" uuid NOT NULL DEFAULT gen_random_uuid(),
    "title" text,
    "content" text,
    "tags" text
)
</code></pre>
<p>Our goal is to run full text search over a document comprising <code>title</code> <code>content</code> <code>tags</code>.</p>
<h2>The simple way</h2>
<p>The easiest way to integrate a form of search, would be to use some basic PostgreSQL <a href="https://www.postgresql.org/docs/9.4/functions-matching.html">pattern matching</a> - Which Hasura exposes in it's searches.</p>
<pre><code class="language-graphql">query Search($searchValue: String! = "%some search string%") {
  articles(
    where: {
      _or: [
        { title: { _ilike: $searchValue } }
        { content: { _ilike: $searchValue } }
        { tags: { _ilike: $searchValue } }
      ]
    }
  ) {
    id
    title
    content
    tags
  }
}
</code></pre>
<p>Simple. No frills. But there are some cons:</p>
<ol>
<li>No fuzzy search</li>
<li>No ranking of results.</li>
<li>No way of weighting the results based on whether the match is in the title, content, or tags.</li>
<li>No dictionary - if you search for "amazingly" it won't match "amazing" or "amazed".</li>
<li>It's super verbose, clunky to write, and prone to human programmer error!</li>
</ol>
<p>So this is fine for very simple, and restrictive search scenarios. But we can do better.</p>
<h2>Fuzzy Search via PostgreSQL Function</h2>
<p>This example is taken directly from the <a href="https://hasura.io/docs/latest/graphql/core/databases/postgres/schema/custom-functions.html#example-fuzzy-match-search-functions">Hasura documentation</a>:</p>
<p>Open up the Hasura console, navigate to to <code>Data > SQL</code>, then do the following:</p>
<pre><code class="language-sql">CREATE EXTENSION pg_trgm;
</code></pre>
<p>We need this extension for creating the GIN index bellow</p>
<pre><code class="language-sql">CREATE INDEX articles_gin_idx ON articles
USING GIN ((title || ' ' || content || ' ' || tags) gin_trgm_ops);
</code></pre>
<p>As a non PostgreSQL expert, this felt like some hand wavey voodoo... <em>What on earth is a GIN index? What on earth is a <code>gin_trgm_ops</code>?</em></p>
<p>Lets start with the <code>trgm</code> part:</p>
<blockquote>
<p>A trigram is a group of three consecutive characters taken from a string. We can measure the similarity of two strings by counting the number of trigrams they share. This simple idea turns out to be very effective for measuring the similarity of words in many natural languages.</p>
<p><a href="https://www.postgresql.org/docs/current/pgtrgm.html">PostgreSQL documentation - pg_trgm</a></p>
</blockquote>
<p>So this function would break the word <code>test</code> into <code>t</code> <code>te</code> <code>tes</code> <code>est</code> <code>st</code> <code>t</code></p>
<blockquote>
<p>GIN is designed for handling cases where the items to be indexed are composite values, and the queries to be handled by the index need to search for element values that appear within the composite items.</p>
<p><a href="https://www.postgresql.org/docs/9.5/gin-intro.html">PostgreSQL documentation - GIN intro</a></p>
</blockquote>
<p>So in this case, we're creating a <em>composite</em> item from <code>title</code>,<code>content</code> and<code>tags</code>, turning it into a <em>trigram</em> and, for performance reasons, we want our PostgreSQL database to index this for faster retrieval.</p>
<p>Now create the actual function (make sure you check the box: "track this function")</p>
<pre><code class="language-sql">CREATE FUNCTION search_articles(search text)
RETURNS SETOF articles AS $$
    SELECT *
    FROM articles
    WHERE
      search &#x3C;% (title || ' ' || content || ' ' || tags)
    ORDER BY
      similarity(search, (title || ' ' || content || ' ' || tags)) DESC
    LIMIT 5;
$$ LANGUAGE sql STABLE;
</code></pre>
<p>The key thing here is the <code>similarity(arg1, arg2)</code> function. It's a function from the <code>pg_trgm</code> module that splits both arguments into trigrams, and compares them. This means our search is quite forgiving on typos and spelling mistakes!</p>
<p>Not bad, but we can do better.</p>
<h2>Full Text Search using a Dictionary</h2>
<p>The issue with fuzzy search, is that it doesn't perform well on derivative words. eg: "adventure" versus "adventuring" or "adventured". What if the person running the search doesn't actually know the exact words to look for? Fuzzy search is forgiving of typos, but not of inprecise search terms.</p>
<p>Enter PostgreSQL Dictionaries.</p>
<blockquote>
<p>Dictionaries allow fine-grained control over how tokens are normalized. With appropriate dictionaries, you can:</p>
<ul>
<li>Define stop words that should not be indexed.</li>
<li>Map synonyms to a single word using Ispell.</li>
<li>Map phrases to a single word using a thesaurus.</li>
<li>Map different variations of a word to a canonical form using an Ispell dictionary.</li>
<li>Map different variations of a word to a canonical form using Snowball stemmer rules.</li>
</ul>
<p><a href="https://www.postgresql.org/docs/13/textsearch-intro.html">PostgreSQL documentation - Text Search Introduction</a></p>
</blockquote>
<p>Nice. REALLY nice. Now let's make it happen.</p>
<p>First, let's create a function that can take all the columns we're interested in, and turn them into a document, and save that document into a new column called <code>ts_vector</code>:</p>
<pre><code class="language-sql">CREATE OR REPLACE FUNCTION public.create_ts_vector()
 RETURNS trigger
 LANGUAGE plpgsql
AS $function$
      BEGIN
          NEW.ts_vector =
            setweight(to_tsvector('simple', coalesce(NEW.title, '')), 'A') ||
            setweight(to_tsvector('simple', coalesce(NEW.content, '')), 'B') ||
            setweight(to_tsvector(coalesce(NEW.tags '')), 'C')
          RETURN NEW;
      END;
  $function$;
</code></pre>
<p>Quite a few things happening here.</p>
<ol>
<li>the <code>coalesce(arg1, arg2)</code> function. This is a precaution, it returns the first non-null argument. We need to guarantee a string, so we use this.</li>
<li>the <code>to_tsvector(arg1)</code> function. According to the PostgreSQL docs:
<blockquote>
<p>A tsvector value is a sorted list of distinct lexemes, which are words that have been normalized to merge different variants of the same word... Sorting and duplicate-elimination are done automatically during input.</p>
<p><a href="https://www.postgresql.org/docs/13/datatype-textsearch.html">PostgreSQL documentation - Text Search Types</a></p>
</blockquote>
</li>
<li>the <code>setweight(arg1, arg2)</code> function. Which ascribes a weight (denoted by capitalised letters: A, B, C etc in descending order of importance), to that specific vector. This is useful for ordering or prioritising parts of our document. In this case, we've decided that the <code>title</code> should be given the most weight when matched against search terms.</li>
</ol>
<p>Ok, next step: a <code>trigger</code> that runs anytime a row is inserted or updated, so that this document column can be created/updated:</p>
<pre><code class="language-sql">CREATE TRIGGER "add_trigger"
BEFORE INSERT OR UPDATE ON "public"."articles"
FOR EACH ROW EXECUTE FUNCTION create_ts_vector();
</code></pre>
<p>Pretty self explanatory.</p>
<p>Final Step: create an actual search function and expose it to hasura.</p>
<pre><code class="language-sql">CREATE OR REPLACE FUNCTION public.search_articles(search text)
 RETURNS SETOF articles
 LANGUAGE sql
 STABLE
AS $function$
    SELECT *
    FROM articles
    WHERE
      articles.ts_vector @@ plainto_tsquery(search)
    ORDER BY ts_rank(articles.ts_vector, plainto_tsquery(search)) DESC
$function$;
</code></pre>
<p>Make sure to track this function from the Hasura console.</p>
<p>So, what's happening here?</p>
<ol>
<li>This function takes in a search term as text.</li>
<li>It returns a set of articles.</li>
<li>It takes the search term and uses it as an argument in the <code>plainto_tsquery()</code> function, which does basically the same thing as the <code>to_tsvector()</code> function, but for the search query.</li>
<li>Compares and tries to match the vector to the query using the <a href="https://www.postgresql.org/docs/13/textsearch-intro.html#TEXTSEARCH-MATCHING">"@@" operator</a>.</li>
<li>Returns the articles ordered and ranked (remember how we set a weight to our search terms?) by <code>ts_rank()</code></li>
</ol>
<p>Now, we have a new hasura graphql query type which we can run using:</p>
<pre><code class="language-graphql">query search($searchTerm: String) {
  search_articles($searchTerm) {
    id
    title
    content
    tags
  }
}
</code></pre>
]]></content:encoded>
            <author>hell@humont.dev (humont)</author>
        </item>
        <item>
            <title><![CDATA[Hello World]]></title>
            <link>https://humont.dev/posts/2021-08-01-hello-world</link>
            <guid>https://humont.dev/posts/2021-08-01-hello-world</guid>
            <pubDate>Sun, 01 Aug 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[Hello World]]></description>
            <content:encoded><![CDATA[<h1>Hello World</h1>
<p>Is this thing on?</p>
]]></content:encoded>
            <author>hell@humont.dev (humont)</author>
        </item>
    </channel>
</rss>